pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--enemy
enemy = {
 sp=118, msp=121, flipx=false,
 w=1, h=1,
 dx=0, dy=0,
}

function enemy:new(x,y,acc)
 local dir=rnd()-0.5>0 and 1 or -1
 local o = {
  x=x, y=y,
  acc=acc*dir
 }
 return setmetatable(o,{__index=self})
end

function enemy:draw()
 spr(self.sp, self.x, self.y, self.w, self.h, self.flipx)
end

function enemy:update()
 self.dx *= f
-- self.acc=-0.1
 self.dx+=self.acc
-- self.running = false
 if self.dx < 0 then
  self.flipx = true
  self.dx = limit(self.dx,mdx)
 elseif self.dx > 0 then
  self.flipx = false
  self.dx = limit(self.dx,mdx)
 end
 gravity(self)
 self.x += self.dx
 if collision(self,'left',0) or
  collision(self,'right',0) then
  self.x+=(sgn(self.dx)*-1)
  self.dx=0
  self.acc*=-1
 end
 self:animate()
end

function enemy:animate()
 if i%5==0 then
  self.sp+=self.sp<self.msp and 1 or -3
 end
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
